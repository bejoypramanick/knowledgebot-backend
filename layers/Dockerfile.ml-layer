# Dockerfile.ml-layer
# ML Layer: Database + OpenAI + Embeddings + Basic ML
# Target size: ~400MB
# Reusable by: Heavy layer

FROM knowledgebot-database-layer:latest

# Install ML libraries
RUN python -m pip install --no-cache-dir \
    openai>=1.107.1,<2.0.0 \
    openai-agents>=0.3.3 \
    sentence-transformers>=2.2.2 \
    torch>=2.1.0 \
    numpy>=1.26.0,<2.0.0

# Create a marker file to identify this layer
RUN echo "knowledgebot-ml-layer-$(date +%s)" > /tmp/layer-marker

CMD ["python", "-c", "print('ML layer ready')"]
