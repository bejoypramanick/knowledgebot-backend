name: Deploy All Lambda Functions

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy-docker-lambdas:
    uses: ./.github/workflows/deploy-docker-lambdas.yml

  deploy-zip-lambdas:
    needs: deploy-docker-lambdas
    uses: ./.github/workflows/deploy-zip-lambdas.yml

  summary:
    needs: [deploy-docker-lambdas, deploy-zip-lambdas]
    runs-on: ubuntu-latest
    if: always()
    
    steps:
    - name: Deployment Summary
      run: |
        echo "ğŸ‰ Lambda Deployment Summary"
        echo "================================"
        echo ""
        echo "Docker Lambdas (Library Installations):"
        echo "  âœ… docling-library-handler"
        echo "  âœ… pinecone-library-handler"
        echo "  âœ… neo4j-library-handler"
        echo "  âœ… openai-library-handler"
        echo "  âœ… sentence-transformer-library-handler"
        echo ""
        echo "Zip Lambdas (Business Logic - Viewable in AWS Console):"
        echo "  âœ… document-processor-business-logic"
        echo "  âœ… chat-orchestrator-business-logic"
        echo "  âœ… dynamodb-crud-handler"
        echo "  âœ… s3-unified-handler"
        echo ""
        echo "ğŸ’¡ All business logic code is now viewable in AWS Lambda console!"
        echo "ğŸ”§ Library installations are handled by Docker Lambdas"
        echo "ğŸ“ All CRUD operations happen in Zip Lambdas"
